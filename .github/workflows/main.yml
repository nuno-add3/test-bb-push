name: Continuous Integration
on:
  push:
    branches:
      - main
jobs:
  test-bb:
    runs-on: ubuntu-latest
    steps:
            - name: Set up ssh-agent
              uses: webfactory/ssh-agent@v0.7.0
              with:
                  ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
                  
            - name: Checking out this repo
              uses: actions/checkout@v3
              with:
                fetch-depth: 0
            - name: Git clone
              run: |
                ssh-keyscan -t rsa bitbucket.org >> ~/.ssh/known_hosts
                git clone -b develop git@bitbucket.org:add3-main/add3-blockchain.git
            
            - name: Ls bb
              run: ls -la

            - name: Emulate a change and push
              working-directory: add3-blockchain
              run: |
                echo "\nend" >> README.md
                git config --global user.email "nuno@add3.io"
                git config --global user.name "Nuno Cervaens"
                git add .
                git commit -m "testing"
                git push
